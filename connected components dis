void dfs(int node, vector<vector<int>>& adj, vector<bool>& vis) {
    vis[node] = true;
    for (int nei : adj[node])
        if (!vis[nei]) dfs(nei, adj, vis);
}

// Usage:
int components = 0;
vector<bool> vis(n, false);
for (int i = 0; i < n; ++i)
    if (!vis[i]) { dfs(i, adj, vis); components++; }
